import{S as ct,i as pt,s as _t,v as g,w as $,e as m,a as d,x as v,b as o,c as ye,d as s,y as b,Z as gt,A as w,B as h,C as D,g as xe,D as I,H as te,_ as $t,$ as vt,a0 as Re,a1 as bt,a2 as We,a3 as wt}from"./index-6810098b.js";import{a as ht,c as Dt,b as Xe,d as It,l as At}from"./index-773fc7e8.js";import{B as he}from"./button-bb4a9d20.js";import{I as qt,C as Ct,D as St,a as kt,A as Nt,b as Tt,c as Ht,d as Lt,T as Ft,e as Bt}from"./total-amount-0ef51f9e.js";function Ye(e){let a,f;return{c(){a=m("img"),o(a,"class","max-w-sm max-h-36 mx-auto"),Re(a.src,f=e[1])||o(a,"src",f),o(a,"alt",e[1])},m(n,_){ye(n,a,_)},p(n,_){_&2&&!Re(a.src,f=n[1])&&o(a,"src",f),_&2&&o(a,"alt",n[1])},d(n){n&&xe(a)}}}function Mt(e){let a,f,n,_,W,U,X,l,E,T,r,le,P,ne,c,L,k,Y,ie,H,se,V,oe,C,y,ae,N,x,i,S,J,De,Z,Ie,A,re,z,Ae,G,F,de,qe,j,ue,Ce,Se,q,fe,ce,pe,_e,ge,ke,B,$e,Ne,K,M,ve,Te,O,be,me,we,He;function et(t){e[6](t)}let Le={};e[0].issuer!==void 0&&(Le.issuer=e[0].issuer),T=new qt({props:Le}),g.push(()=>$(T,"issuer",et,e[0].issuer));function tt(t){e[7](t)}let Fe={};e[0].customer!==void 0&&(Fe.customer=e[0].customer),k=new Ct({props:Fe}),g.push(()=>$(k,"customer",tt,e[0].customer)),H=new St({props:{invoiceId:e[0].invoiceId,createdDate:e[0].createdDate,dueDate:e[0].dueDate,status:e[0].status}});function nt(t){e[8](t)}let Be={};e[0].items!==void 0&&(Be.items=e[0].items),C=new kt({props:Be}),g.push(()=>$(C,"items",nt,e[0].items)),C.$on("setTotalAmount",e[4]);function it(t){e[9](t)}let Me={};e[0].note!==void 0&&(Me.note=e[0].note),N=new Nt({props:Me}),g.push(()=>$(N,"note",it,e[0].note)),J=new he({props:{type:"submit",text:"Save",class:"secondary "}}),Z=new he({props:{type:"submit",text:"Leave",func:e[10],class:"error"}}),z=new he({props:{func:e[5],text:"Print",class:"success"}});function st(t){e[11](t)}let Oe={};e[0].issuer!==void 0&&(Oe.issuer=e[0].issuer),F=new Tt({props:Oe}),g.push(()=>$(F,"issuer",st,e[0].issuer));let p=e[1]&&Ye(e);function ot(t){e[12](t)}function at(t){e[13](t)}function rt(t){e[14](t)}function ut(t){e[15](t)}function mt(t){e[16](t)}let Q={};e[0].invoiceId!==void 0&&(Q.invoiceId=e[0].invoiceId),e[0].createdDate!==void 0&&(Q.createdDate=e[0].createdDate),e[0].dueDate!==void 0&&(Q.dueDate=e[0].dueDate),e[0].customer!==void 0&&(Q.client=e[0].customer),e[0].status!==void 0&&(Q.status=e[0].status),q=new Ht({props:Q}),g.push(()=>$(q,"invoiceId",ot,e[0].invoiceId)),g.push(()=>$(q,"createdDate",at,e[0].createdDate)),g.push(()=>$(q,"dueDate",rt,e[0].dueDate)),g.push(()=>$(q,"client",ut,e[0].customer)),g.push(()=>$(q,"status",mt,e[0].status));function lt(t){e[17](t)}let Ue={};e[0].items!==void 0&&(Ue.items=e[0].items),B=new Lt({props:Ue}),g.push(()=>$(B,"items",lt,e[0].items));function dt(t){e[18](t)}let je={};e[0].totalAmount!==void 0&&(je.totalAmount=e[0].totalAmount),M=new Ft({props:je}),g.push(()=>$(M,"totalAmount",dt,e[0].totalAmount));function ft(t){e[19](t)}let Ee={};return e[0].note!==void 0&&(Ee.note=e[0].note),O=new Bt({props:Ee}),g.push(()=>$(O,"note",ft,e[0].note)),{c(){a=m("div"),f=m("section"),n=m("form"),_=m("h1"),_.textContent="Create your next invoice",W=d(),U=m("div"),U.innerHTML='<h3 class="font-extrabold">Issue Company Info.</h3>',X=d(),l=m("div"),E=m("section"),v(T.$$.fragment),le=d(),P=m("div"),P.innerHTML='<h3 class="font-extrabold">Customer Company &amp; Invoice Info.</h3>',ne=d(),c=m("section"),L=m("div"),v(k.$$.fragment),ie=d(),v(H.$$.fragment),se=d(),V=m("div"),V.innerHTML='<h3 class="font-extrabold">Items</h3>',oe=d(),v(C.$$.fragment),ae=d(),v(N.$$.fragment),i=d(),S=m("div"),v(J.$$.fragment),De=d(),v(Z.$$.fragment),Ie=d(),A=m("section"),re=m("div"),v(z.$$.fragment),Ae=d(),G=m("section"),v(F.$$.fragment),qe=d(),j=m("div"),ue=m("h1"),ue.textContent="Invoice",Ce=d(),p&&p.c(),Se=d(),v(q.$$.fragment),ke=d(),v(B.$$.fragment),Ne=d(),K=m("div"),v(M.$$.fragment),Te=d(),v(O.$$.fragment),o(_,"class","text-center text-4xl font-extrabold mb-2"),o(U,"class","divider"),o(E,"class","issuer-section pb-5"),o(P,"class","divider"),o(L,"class","lg:grid grid-cols-2 gap-2 "),o(V,"class","divider"),o(S,"class","flex justify-self-end"),o(c,"class","grid issuer-section pb-5"),o(l,"class","invoice-create-form lg:grid grid-col-3"),o(f,"class","not-printable md:grid grdi-cols-3 p-5 m-5 border-2 rounded shadow-md w-50"),o(re,"class","not-printable self-center"),o(ue,"class","text-right text-4xl font-extrabold "),o(j,"class","grid"),o(G,"class","flex justify-between"),o(K,"class","mt-auto"),o(A,"class","invoice-preview rounded border-2 shadow-md p-5 m-5 flex flex-col gap-5 "),o(a,"class","sm:grid lg:grid grid-cols-2 ")},m(t,u){ye(t,a,u),s(a,f),s(f,n),s(n,_),s(n,W),s(n,U),s(n,X),s(n,l),s(l,E),b(T,E,null),s(l,le),s(l,P),s(l,ne),s(l,c),s(c,L),b(k,L,null),s(L,ie),b(H,L,null),s(c,se),s(c,V),s(c,oe),b(C,c,null),s(c,ae),b(N,c,null),s(c,i),s(c,S),b(J,S,null),s(S,De),b(Z,S,null),s(a,Ie),s(a,A),s(A,re),b(z,re,null),s(A,Ae),s(A,G),b(F,G,null),s(G,qe),s(G,j),s(j,ue),s(j,Ce),p&&p.m(j,null),s(A,Se),b(q,A,null),s(A,ke),b(B,A,null),s(A,Ne),s(A,K),b(M,K,null),s(K,Te),b(O,K,null),me=!0,we||(He=gt(e[2].call(null,n)),we=!0)},p(t,[u]){const Pe={};!r&&u&1&&(r=!0,Pe.issuer=t[0].issuer,w(()=>r=!1)),T.$set(Pe);const Ve={};!Y&&u&1&&(Y=!0,Ve.customer=t[0].customer,w(()=>Y=!1)),k.$set(Ve);const ee={};u&1&&(ee.invoiceId=t[0].invoiceId),u&1&&(ee.createdDate=t[0].createdDate),u&1&&(ee.dueDate=t[0].dueDate),u&1&&(ee.status=t[0].status),H.$set(ee);const Je={};!y&&u&1&&(y=!0,Je.items=t[0].items,w(()=>y=!1)),C.$set(Je);const Ze={};!x&&u&1&&(x=!0,Ze.note=t[0].note,w(()=>x=!1)),N.$set(Ze);const ze={};!de&&u&1&&(de=!0,ze.issuer=t[0].issuer,w(()=>de=!1)),F.$set(ze),t[1]?p?p.p(t,u):(p=Ye(t),p.c(),p.m(j,null)):p&&(p.d(1),p=null);const R={};!fe&&u&1&&(fe=!0,R.invoiceId=t[0].invoiceId,w(()=>fe=!1)),!ce&&u&1&&(ce=!0,R.createdDate=t[0].createdDate,w(()=>ce=!1)),!pe&&u&1&&(pe=!0,R.dueDate=t[0].dueDate,w(()=>pe=!1)),!_e&&u&1&&(_e=!0,R.client=t[0].customer,w(()=>_e=!1)),!ge&&u&1&&(ge=!0,R.status=t[0].status,w(()=>ge=!1)),q.$set(R);const Ge={};!$e&&u&1&&($e=!0,Ge.items=t[0].items,w(()=>$e=!1)),B.$set(Ge);const Ke={};!ve&&u&1&&(ve=!0,Ke.totalAmount=t[0].totalAmount,w(()=>ve=!1)),M.$set(Ke);const Qe={};!be&&u&1&&(be=!0,Qe.note=t[0].note,w(()=>be=!1)),O.$set(Qe)},i(t){me||(h(T.$$.fragment,t),h(k.$$.fragment,t),h(H.$$.fragment,t),h(C.$$.fragment,t),h(N.$$.fragment,t),h(J.$$.fragment,t),h(Z.$$.fragment,t),h(z.$$.fragment,t),h(F.$$.fragment,t),h(q.$$.fragment,t),h(B.$$.fragment,t),h(M.$$.fragment,t),h(O.$$.fragment,t),me=!0)},o(t){D(T.$$.fragment,t),D(k.$$.fragment,t),D(H.$$.fragment,t),D(C.$$.fragment,t),D(N.$$.fragment,t),D(J.$$.fragment,t),D(Z.$$.fragment,t),D(z.$$.fragment,t),D(F.$$.fragment,t),D(q.$$.fragment,t),D(B.$$.fragment,t),D(M.$$.fragment,t),D(O.$$.fragment,t),me=!1},d(t){t&&xe(a),I(T),I(k),I(H),I(C),I(N),I(J),I(Z),I(z),I(F),p&&p.d(),I(q),I(B),I(M),I(O),we=!1,He()}}}function Ot(e,a,f){let n,_,W,U,X;te(e,Xe,i=>f(20,_=i)),te(e,It,i=>f(21,W=i)),te(e,bt,i=>f(22,U=i)),te(e,At,i=>f(1,X=i));const l=U??JSON.parse(localStorage.getItem("appUser")),{form:E,errors:T,data:r,isValid:le}=$t({initialValues:{issuer:{_id:l._id,username:l.username??"",email:l.email??"",phone:l.phone??"",website:l.website??"",address:l.address??"",bankName:l.bankName??"",bankAccount:l.bankAccount??"",bankHolder:l.bankHolder??""},customer:{name:"",email:"",address:"",phone:""},invoiceId:new Date().valueOf().toString(),createdDate:new Date().toLocaleDateString(),dueDate:new Date().toLocaleDateString(),note:W,status:ht.NOT_PAID,items:[],totalAmount:0},onSubmit:async i=>{const S=await Dt(i);return console.log(S),S},onSuccess:(i,S)=>{vt("Invoice saved!",{icon:"ðŸ§¾",position:"bottom-center",style:"border-radius: 200px;"})},onError(i,S){console.error(i)}});te(e,r,i=>f(0,n=i));function P(i){We(r,n.totalAmount=i.detail.totalAmount,n),We(Xe,_.totalAmount=Number(n.totalAmount.toFixed(2)),_)}const ne=()=>{window.print()};function c(i){e.$$.not_equal(n.issuer,i)&&(n.issuer=i,r.set(n))}function L(i){e.$$.not_equal(n.customer,i)&&(n.customer=i,r.set(n))}function k(i){e.$$.not_equal(n.items,i)&&(n.items=i,r.set(n))}function Y(i){e.$$.not_equal(n.note,i)&&(n.note=i,r.set(n))}const ie=()=>wt("/");function H(i){e.$$.not_equal(n.issuer,i)&&(n.issuer=i,r.set(n))}function se(i){e.$$.not_equal(n.invoiceId,i)&&(n.invoiceId=i,r.set(n))}function V(i){e.$$.not_equal(n.createdDate,i)&&(n.createdDate=i,r.set(n))}function oe(i){e.$$.not_equal(n.dueDate,i)&&(n.dueDate=i,r.set(n))}function C(i){e.$$.not_equal(n.customer,i)&&(n.customer=i,r.set(n))}function y(i){e.$$.not_equal(n.status,i)&&(n.status=i,r.set(n))}function ae(i){e.$$.not_equal(n.items,i)&&(n.items=i,r.set(n))}function N(i){e.$$.not_equal(n.totalAmount,i)&&(n.totalAmount=i,r.set(n))}function x(i){e.$$.not_equal(n.note,i)&&(n.note=i,r.set(n))}return[n,X,E,r,P,ne,c,L,k,Y,ie,H,se,V,oe,C,y,ae,N,x]}class Vt extends ct{constructor(a){super(),pt(this,a,Ot,Mt,_t,{})}}export{Vt as default};
