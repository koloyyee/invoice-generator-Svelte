import{ag as K,ah as p,S as D,i as F,s as I,e as d,a as b,t as J,x as O,b as a,c as S,d as o,y as W,Z as Q,B as Z,C as z,g as $,D as G,H as M,a1 as R,_ as V,ai as X,f as Y,n as ee}from"./index-6810098b.js";import{B as te}from"./button-bb4a9d20.js";function re(u){function r(s){return s.issues.reduce((n,e)=>e.path?K(n,e.path.join("."),l=>!l||!Array.isArray(l)?[e.message]:[...l,e.message]):n,{})}return async function(n){try{await u.parseAsync(n)}catch(e){return r(e)}}}function C({schema:u,level:r="error"}){return function(n){if(n.stage!=="SETUP")return{};const e=re(u);return n.addValidator(e,{level:r}),{}}}const ne=p.record(p.object({username:p.string().min(1,"cannot be empty."),email:p.string().email().min(1,"cannot be empty."),website:p.string(),address:p.string(),bankName:p.string(),bankAccount:p.string(),bankHolder:p.string()}));function P(u){let r,s,n,e=u[0].user.username+"",l;return{c(){r=d("div"),s=d("div"),n=d("span"),l=J(e),a(n,"class","text-white"),a(r,"class","alert alert-error shadow-lg my-1")},m(f,t){S(f,r,t),o(r,s),o(s,n),o(n,l)},p(f,t){t&1&&e!==(e=f[0].user.username+"")&&Y(l,e)},d(f){f&&$(r)}}}function ae(u){let r,s,n,e,l,f,t,U,_,w,h,i,x,g,v,k,B,H,j,A,E,y,T,L,q,m=u[0].user.username&&u[1].user.username&&P(u);return y=new te({props:{class:"secondary my-5",text:"Update"}}),{c(){r=d("h1"),r.textContent="Update your account details",s=b(),n=d("section"),e=d("form"),l=d("label"),f=J(`Username:
      `),t=d("input"),U=b(),m&&m.c(),_=b(),w=d("label"),w.innerHTML=`Email:
      <input class="error rounded input input-bordered w-full max-w-xs" type="email" name="user.email" id="email" required=""/>`,h=b(),i=d("label"),i.innerHTML=`Website:
      <input class="error rounded input input-bordered w-full max-w-xs" type="text" name="user.website" id="website"/>`,x=b(),g=d("label"),g.innerHTML=`Address:
      <input class="error rounded input input-bordered w-full max-w-xs" type="text" name="user.address" id="address"/>`,v=b(),k=d("label"),k.innerHTML=`Holder&#39;s Name:
      <input class="error rounded input input-bordered w-full max-w-xs" type="text" name="user.bankHolder" id="holderName"/>`,B=b(),H=d("label"),H.innerHTML=`Bank Name:
      <input class="error rounded input input-bordered w-full max-w-xs" type="text" name="user.bankName" id="bankName"/>`,j=b(),A=d("label"),A.innerHTML=`Bank Account:
      <input class="error rounded input input-bordered w-full max-w-xs" type="text" name="user.bankAccount" id="bankAccount"/>`,E=b(),O(y.$$.fragment),a(r,"class","text-4xl font-extrabold py-5 mx-5"),a(t,"class","error rounded input input-bordered w-full max-w-xs"),a(t,"type","text"),a(t,"name","user.username"),a(t,"id","username"),t.required=!0,a(l,"for","username"),a(l,"class","w-full"),a(w,"for","email"),a(w,"class","w-full"),a(i,"for","website"),a(i,"class","w-full"),a(g,"for","address"),a(g,"class","w-full"),a(k,"for","holderName"),a(k,"class","w-full"),a(H,"for","bankName"),a(H,"class","w-full"),a(A,"for","bankAccount"),a(A,"class","w-full"),a(e,"class","flex flex-col border-2 border-gray-50 shadow-xl justify-center items-center w-max p-10 rounded sm:mx-5"),a(n,"class","grid place-content-center")},m(c,N){S(c,r,N),S(c,s,N),S(c,n,N),o(n,e),o(e,l),o(l,f),o(l,t),o(l,U),m&&m.m(l,null),o(e,_),o(e,w),o(e,h),o(e,i),o(e,x),o(e,g),o(e,v),o(e,k),o(e,B),o(e,H),o(e,j),o(e,A),o(e,E),W(y,e,null),T=!0,L||(q=Q(u[2].call(null,e)),L=!0)},p(c,[N]){c[0].user.username&&c[1].user.username?m?m.p(c,N):(m=P(c),m.c(),m.m(l,null)):m&&(m.d(1),m=null)},i(c){T||(Z(y.$$.fragment,c),T=!0)},o(c){z(y.$$.fragment,c),T=!1},d(c){c&&$(r),c&&$(s),c&&$(n),m&&m.d(),G(y),L=!1,q()}}}function se(u,r,s){let n,e,l;M(u,R,i=>s(5,n=i));const f=p.object({password:p.string().refine(i=>i?i.length>8:!0,{message:"Password is not secure"})}),t=n??JSON.parse(localStorage.getItem("appUser")),{form:U,errors:_,data:w,touched:h}=V({initialValues:{user:{username:(t==null?void 0:t.username)??"",email:(t==null?void 0:t.email)??"",website:(t==null?void 0:t.website)??"",address:(t==null?void 0:t.website)??"",bankName:(t==null?void 0:t.bankName)??"",bankAccount:(t==null?void 0:t.bankAccount)??"",bankHolder:(t==null?void 0:t.bankHolder)??""}},extend:[C({schema:ne}),C({schema:f,level:"warning"})],onSubmit:async(i,x)=>{const[g,v]=await X(t._id,i.user);return v},onSuccess(i,x){console.log(i),console.log(x)},onError(i,x){console.log(i)}});return M(u,_,i=>s(0,e=i)),M(u,h,i=>s(1,l=i)),[e,l,U,_,h]}class le extends D{constructor(r){super(),F(this,r,se,ae,I,{})}}function oe(u){let r,s,n;return s=new le({}),{c(){r=d("div"),O(s.$$.fragment),a(r,"class","h-screen flex flex-col pt-5 ")},m(e,l){S(e,r,l),W(s,r,null),n=!0},p:ee,i(e){n||(Z(s.$$.fragment,e),n=!0)},o(e){z(s.$$.fragment,e),n=!1},d(e){e&&$(r),G(s)}}}class ce extends D{constructor(r){super(),F(this,r,null,oe,I,{})}}export{ce as default};
